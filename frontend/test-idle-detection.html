<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idle Detection Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        .status.active {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.idle {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .timer {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
            margin: 20px 0;
        }
        .instructions {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
        }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🔍 Idle Detection Test</h1>
        
        <div class="instructions">
            <h3>Instructions:</h3>
            <ol>
                <li>Open the main kiosk application at <a href="http://localhost:5173/" target="_blank">http://localhost:5173/</a></li>
                <li>Open the browser's Developer Tools (F12)</li>
                <li>Go to the Console tab</li>
                <li>Stop interacting with the page for 30 seconds</li>
                <li>Watch for console messages and the idle modal to appear</li>
            </ol>
        </div>

        <div class="status active" id="status">
            ✅ Test Page Active - Check the main kiosk application
        </div>

        <div class="timer" id="timer">
            Timer: 0 seconds
        </div>

        <h3>Expected Console Messages:</h3>
        <div class="log">
            🏗️ KioskLayout render - showIdleModal: false countdown: 5<br>
            🔄 Resetting idle timer, current path: /<br>
            ⏹️ Cleared existing idle timer<br>
            ⏰ Starting new idle timer for 30000ms<br>
            🎯 Setting up event listeners for idle detection<br>
            🚀 Timer management effect triggered, path: /<br>
            📍 Location changed to: /<br>
            🔄 Resetting idle state for new page<br>
            👆 User activity detected, path: /<br>
            ...(after 30 seconds of inactivity)...<br>
            ⚠️ Idle timeout reached, showing modal<br>
            🎭 IdleModal render - isOpen: true countdown: 5<br>
            ⏳ Modal countdown: 5 seconds remaining<br>
            ⏳ Modal countdown: 4 seconds remaining<br>
            ⏳ Modal countdown: 3 seconds remaining<br>
            ⏳ Modal countdown: 2 seconds remaining<br>
            ⏳ Modal countdown: 1 seconds remaining<br>
            🔚 Countdown finished, redirecting to idle page
        </div>

        <h3>Troubleshooting:</h3>
        <ul>
            <li><strong>No console messages:</strong> Check if the React app is running and refresh the page</li>
            <li><strong>Timer resets constantly:</strong> Check for mouse movements or other activity</li>
            <li><strong>Modal doesn't appear:</strong> Check for JavaScript errors in console</li>
            <li><strong>Modal appears but countdown doesn't work:</strong> Check timer implementation</li>
        </ul>

        <h3>Quick Test Actions:</h3>
        <button onclick="window.open('http://localhost:5173/', '_blank')">Open Kiosk App</button>
        <button onclick="alert('This simulates user activity - the real test should be done in the kiosk app')">Simulate Activity</button>
    </div>

    <script>
        let seconds = 0;
        setInterval(() => {
            seconds++;
            document.getElementById('timer').textContent = `Timer: ${seconds} seconds`;
        }, 1000);

        // Log when this test page gets activity
        ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart', 'click'].forEach(event => {
            document.addEventListener(event, () => {
                console.log(`🧪 Test page activity: ${event}`);
            });
        });
    </script>
</body>
</html>
